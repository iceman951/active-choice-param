properties([
    parameters([
        [$class: 'DynamicReferenceParameter',
            choiceType: 'ET_FORMATTED_HTML',
            description: 'describe',
            name: 'PARAM_ONE',
            referencedParameters: 'ENVIRONMENT',
            script: [$class: 'GroovyScript',
                fallbackScript: [
                    classpath: [],
                    sandbox: false,
                    script: 'return ["ERROR"]'
                ],
                script: [
                    classpath: [],
                    sandbox: false,
                    script: """
                        def html = '''
                        <html>
                        <body>

                        <p>Click the button to create a Text Field.</p>
                        <button onclick="myFunction()">Try it</button>

                        <p>test</p>

                        <script>
                        function myFunction() {
                          var x = document.createElement("BUTTON");
                          x.setAttribute("type", "text");
                          x.setAttribute("value", "Hello World!");
                          document.body.appendChild(x);
                        }
                        </script>
                        </body>
                        </html>
                        '''
                        return html
                    """
                ]
            ]
        ]
    ])
])

pipeline {
  agent any
  stages {
    stage('Build') {
      steps {
        script {
          def echoFunc = load 'libs/echo.groovy'
          echoFunc.echo("Ice")
          echo "${params.Environment}"
          echo "${params.Host}"
        }
      }
    }
  }
}